<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>XRISK Demo</title>
    <style>
        body { font-family: Arial, sans-serif; margin:0; padding:0; background:#001429; }
        header { background:#000000; color:white; padding:15px 30px; display:flex; align-items:center; justify-content:space-between; }
        header nav a { color:white; margin:0 15px; text-decoration:none; font-weight:bold; }
        .hero { background:#ffffff; padding:50px 30px; text-align:center; }
        .hero h1 { font-size:32px; margin-bottom:15px; }
        .hero p { font-size:18px; color:#444; margin-bottom:20px; }
        .btn { background:#0078d4; color:white; padding:12px 25px; text-decoration:none; border-radius:5px; font-weight:bold; display:inline-block; cursor:pointer; border:none; font-size:14px; }
        .btn:hover { background:#005a9e; }
        .section { padding:40px 30px; background:#ffffff; margin-top:20px; border-radius:8px; max-width:1100px; margin-left:auto; margin-right:auto; position:relative; }
        .section h2 { font-size:28px; color:#0b2c3d; margin-bottom:10px; }
        .section p { font-size:16px; color:#555; line-height:1.5; }
        
        /* Bot√≥n de captura */
        .capture-btn {
            position: absolute;
            top: 10px;
            right: 30px;
            background: #28a745;
            padding: 8px 16px;
            font-size: 14px;
            z-index: 100;
        }
        .capture-btn:hover {
            background: #218838;
        }
        
        /* Estilos para el dashboard */
        .dashboard-container {
            background:#D9D9D9;
            padding:20px;
            border-radius:10px;
            position: relative;
            margin-top: 40px;
            overflow: hidden;
        }

        /* ===== ESTILO PARA OCULTAR BARRA POWER BI ===== */
        .pbi-wrapper {
            width: 100%;
            height: 560px;
            overflow: hidden;
            position: relative;
            border-radius: 8px;
        }

        .pbi-wrapper iframe {
            width: 100%;
            height: 700px;
            border: none;
        }
        
        /* Indicador de captura */
        .capture-indicator {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 167, 69, 0.2);
            border: 3px solid #28a745;
            border-radius: 10px;
            z-index: 50;
            pointer-events: none;
            animation: pulse 0.5s ease-in-out;
            display: none;
        }
        
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 0.8; }
            100% { opacity: 0.2; }
        }
        
        /* Mensaje de instrucciones */
        .instructions {
            background-color: #f8f9fa;
            border-left: 4px solid #0078d4;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            display: none;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>

<!-- ===== CABECERA / MENU ===== -->
<header>
    <div class="logo">
        <span style="font-size:24px; font-weight:bold;">XRISK Demo</span>
    </div>
    <nav>
        <a href="#dashboard1">DASHBOARD 1</a>
        <a href="#dashboard2">DASHBOARD 2 (sin barra)</a>
        <a href="#soluciones">SOLUCIONES</a>
        <a href="#contacto">CONTACTO</a>
    </nav>
</header>

<!-- ===== HERO / TITULO PRINCIPAL ===== -->
<section class="hero">
    <h1>Lleva tu empresa al siguiente nivel</h1>
    <p>Somos una firma especializada en soluciones estrat√©gicas, inteligencia artificial y an√°lisis de datos.</p>
</section>

<!-- ===== DASHBOARD 1 (ORIGINAL CON BARRA) ===== -->
<section id="dashboard1" class="section">
    <h2>Dashboard con barra inferior (original)</h2>
    
    <!-- Bot√≥n para capturar el dashboard -->
    <button id="captureDashboard1" class="btn capture-btn">
        üì∏ Capturar Dashboard
    </button>
    
    <div class="dashboard-container" id="dashboard1-container">
        <!-- Indicador visual de captura -->
        <div id="captureIndicator" class="capture-indicator"></div>
        
        <!-- Dashboard de Power BI -->
        <iframe 
            src="https://app.powerbi.com/view?r=eyJrIjoiNDBmZDUzN2QtNWU4Yy00Y2QzLTg0NDctMjMxNjRkYzZiMDdjIiwidCI6IjFlYmE0NDNmLTIzZTUtNDUzNC05MGQxLTA5NzZhYWJlODZhYyIsImMiOjR9" 
            style="width:100%; height:560px; border:none; border-radius:8px;" 
            allowfullscreen="true"
            id="dashboardIframe">
        </iframe>
    </div>
    
    <!-- Instrucciones para captura -->
    <div id="instructions" class="instructions">
        <h3>Instrucciones para capturar el dashboard:</h3>
        <ul>
            <li><strong>Opci√≥n 1 (Recomendada):</strong> Usa la herramienta de recorte de tu sistema operativo</li>
            <li><strong>Windows:</strong> Presiona <kbd>Windows + Shift + S</kbd> y selecciona el √°rea del dashboard</li>
            <li><strong>Mac:</strong> Presiona <kbd>Shift + Command + 4</kbd> y selecciona el √°rea del dashboard</li>
            <li><strong>Opci√≥n 2:</strong> Usa una extensi√≥n de navegador para capturar pantalla</li>
        </ul>
        <p>La captura autom√°tica desde el navegador no funciona debido a restricciones de seguridad con iframes.</p>
    </div>
    
    <!-- Bot√≥n para m√©todo alternativo -->
    <div style="text-align:center; margin-top:20px;">
        <button id="alternativeMethod" class="btn" style="background:#6c757d;">
            üìã Mostrar m√©todos alternativos
        </button>
    </div>
</section>

<!-- ===== DASHBOARD 2 (FORMA 1 ‚Äì SIN BARRA INFERIOR) ===== -->
<section id="dashboard2" class="section">
    <h2>Dashboard sin barra inferior (Forma 1)</h2>
    <div style="background:#D9D9D9; padding:20px; border-radius:10px;">
        <div class="pbi-wrapper">
            <iframe 
                src="https://app.powerbi.com/view?r=eyJrIjoiNDBmZDUzN2QtNWU4Yy00Y2QzLTg0NDctMjMxNjRkYzZiMDdjIiwidCI6IjFlYmE0NDNmLTIzZTUtNDUzNC05MGQxLTA5NzZhYWJlODZhYyIsImMiOjR9"
                allowfullscreen="true">
            </iframe>
        </div>
    </div>
</section>

<!-- ===== CONTACTO ===== -->
<section id="contacto" class="section">
    <h2>Contacto</h2>
    <p>Correo: cclaros@xrisk.pe</p>
    <p>Tel: +51 994 366 233</p>
</section>

<script>
    // Mostrar/ocultar instrucciones
    document.getElementById('alternativeMethod').addEventListener('click', function() {
        const instructions = document.getElementById('instructions');
        if (instructions.style.display === 'block') {
            instructions.style.display = 'none';
            this.innerHTML = 'üìã Mostrar m√©todos alternativos';
        } else {
            instructions.style.display = 'block';
            this.innerHTML = 'üìã Ocultar m√©todos alternativos';
        }
    });
    
    // Funci√≥n principal de captura
    document.getElementById('captureDashboard1').addEventListener('click', async function() {
        const container = document.getElementById('dashboard1-container');
        const indicator = document.getElementById('captureIndicator');
        
        // Mostrar indicador visual
        indicator.style.display = 'block';
        
        // Desplazar a la vista
        container.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Esperar a que termine la animaci√≥n de scroll
        await new Promise(resolve => setTimeout(resolve, 500));
        
        try {
            // Intentar usar la API de captura de pantalla del navegador
            if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
                // Este m√©todo requiere interacci√≥n del usuario
                alert("Para capturar el dashboard, se abrir√° un selector de pantalla. Selecciona la ventana/pesta√±a que contiene este dashboard.");
                
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: true,
                    preferCurrentTab: true // Esta opci√≥n es experimental
                });
                
                // Crear un video para capturar el frame
                const video = document.createElement('video');
                video.srcObject = stream;
                video.play();
                
                video.onloadeddata = () => {
                    // Crear un canvas para capturar el video
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    
                    // Detener el stream
                    stream.getTracks().forEach(track => track.stop());
                    
                    // Descargar la imagen
                    const link = document.createElement('a');
                    link.download = `dashboard-xrisk-${new Date().getTime()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    
                    // Ocultar indicador
                    indicator.style.display = 'none';
                    
                    alert("Captura completada. La imagen se ha descargado.");
                };
            } else {
                // Si la API no est√° disponible, mostrar m√©todos manuales
                throw new Error("API no disponible");
            }
        } catch (error) {
            console.error('Error en captura autom√°tica:', error);
            
            // Mostrar m√©todos alternativos
            indicator.style.display = 'none';
            document.getElementById('instructions').style.display = 'block';
            document.getElementById('alternativeMethod').innerHTML = 'üìã Ocultar m√©todos alternativos';
            
            // Crear un overlay con instrucciones
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            
            const messageBox = document.createElement('div');
            messageBox.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 10px;
                max-width: 600px;
                text-align: center;
            `;
            
            messageBox.innerHTML = `
                <h2>üì∏ C√≥mo capturar el dashboard</h2>
                <p>Debido a restricciones de seguridad del navegador, la captura autom√°tica no est√° disponible.</p>
                <h3>M√©todos recomendados:</h3>
                <div style="text-align: left; margin: 20px 0;">
                    <p><strong>1. Herramienta de recorte (Windows/Mac):</strong></p>
                    <ul>
                        <li><strong>Windows:</strong> Presiona <kbd>Windows + Shift + S</kbd></li>
                        <li><strong>Mac:</strong> Presiona <kbd>Shift + Command + 4</kbd></li>
                        <li>Selecciona solo el √°rea del dashboard</li>
                    </ul>
                    
                    <p><strong>2. Extensi√≥n de navegador:</strong></p>
                    <ul>
                        <li>Instala una extensi√≥n como "Awesome Screenshot" o "Nimbus Screenshot"</li>
                        <li>Usa la opci√≥n "Capturar √°rea visible"</li>
                    </ul>
                    
                    <p><strong>3. Tecla Impr Pant (Print Screen):</strong></p>
                    <ul>
                        <li>Presiona la tecla <kbd>Impr Pant</kbd> en tu teclado</li>
                        <li>Pega en Paint o cualquier editor de im√°genes</li>
                        <li>Recorta solo el √°rea del dashboard</li>
                    </ul>
                </div>
                <button id="closeOverlay" style="
                    background: #28a745;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 16px;
                    margin-top: 10px;
                ">Entendido</button>
            `;
            
            overlay.appendChild(messageBox);
            document.body.appendChild(overlay);
            
            document.getElementById('closeOverlay').addEventListener('click', function() {
                document.body.removeChild(overlay);
            });
        }
    });
    
    // Atajo de teclado
    document.addEventListener('keydown', function(event) {
        // Verificar si estamos en la secci√≥n del dashboard 1
        const dashboard1Section = document.getElementById('dashboard1');
        const rect = dashboard1Section.getBoundingClientRect();
        const isInDashboardSection = rect.top < window.innerHeight && rect.bottom > 0;
        
        // Si estamos en la secci√≥n y presionamos "p" o "P"
        if (isInDashboardSection && (event.key === 'p' || event.key === 'P')) {
            event.preventDefault();
            document.getElementById('captureDashboard1').click();
        }
    });
</script>

</body>
</html>


